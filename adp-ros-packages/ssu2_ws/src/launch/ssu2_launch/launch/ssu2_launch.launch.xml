<?xml version="1.0"?>
<launch>
  <!-- PRESERVED_JINJA2_CODEGEN_START -->

  <arg name="use_pointcloud" default="false"/>

  <arg name="workspace_path" default="/home/misys/ssu2_ws" />
  <arg name="assets_path" default="$(var workspace_path)/assets" />
  <arg name="map_path" default="$(var assets_path)/sample-map-planning" />
  <arg name="pointcloud_map_file" default="pointcloud_map.pcd" />
  <arg name="lanelet2_map_file" default="lanelet2_map.osm" />
  <arg name="vehicle_model" default="sedan_vehicle" description="vehicle model name"/>
  <arg name="sensor_model" default="sample_sensor_kit" description="sensor model name"/>
  <!-- <arg name="data_path" default="$(env HOME)/autoware_data" description="packages data and artifacts directory path"/> -->

  <!-- launch module preset -->
  <arg name="planning_module_preset" default="default" description="planning module preset"/>
  <arg name="control_module_preset" default="default" description="control module preset"/>

  <arg name="pointcloud_map_path" default="$(var map_path)/$(var pointcloud_map_file)" />
  <arg name="pointcloud_map_metadata_path" default="$(var map_path)/metadata.yaml" />
  <arg name="lanelet2_map_path" default="$(var map_path)/$(var lanelet2_map_file)" />
  <arg name="map_projector_info_path" default="$(var map_path)/map_projector_info.yaml" />

  <arg name="lanelet2_map_loader_param_path" default="$(find-pkg-share autoware_map_loader)/config/lanelet2_map_loader.param.yaml"/>
  <arg name="lanelet2_map_path" default="$(var lanelet2_map_path)"/>
  <arg name="lanelet2_map_topic" default="vector_map"/>
  <arg name="lanelet2_map_marker_topic" default="vector_map_marker"/>

  <arg name="rviz" default="true" description="launch rviz"/>
  <arg name="rviz_config_name" default="ssu2.rviz" description="rviz config name"/>
  <arg name="rviz_config" default="$(find-pkg-share ssu2_launch)/rviz/$(var rviz_config_name)" description="rviz config path"/>
  <arg name="rviz_respawn" default="false"/>

  <!-- Scenario simulation -->
  <arg name="scenario_simulation" default="false" description="use scenario simulation"/>

  <!-- Simulated time -->
  <arg name="use_sim_time" default="$(var scenario_simulation)"/>

  <!-- autoware.launch.xml -->

  <!-- Vehicle -->
  <arg name="vehicle_id" default="$(env VEHICLE_ID default)" description="vehicle specific ID"/>
  <!-- <arg name="launch_vehicle_interface" default="true" description="launch vehicle interface"/> -->
  <arg name="launch_vehicle_interface" default="false" description="launch vehicle interface"/>

  <include file="$(find-pkg-share ssu2_launch)/launch/components/vehicle.launch.xml">
    <arg name="vehicle_model" value="$(var vehicle_model)"/>
    <arg name="sensor_model" value="$(var sensor_model)"/>
    <arg name="vehicle_id" value="$(var vehicle_id)"/>
    <arg name="launch_vehicle_interface" value="$(var launch_vehicle_interface)"/>
    <arg name="config_dir" value="$(find-pkg-share $(var sensor_model)_description)/config"/>
    <!-- <arg name="raw_vehicle_cmd_converter_param_path" value="$(find-pkg-share ssu2_launch)/config/vehicle/raw_vehicle_cmd_converter/raw_vehicle_cmd_converter.param.yaml"/> -->
  </include>

  <include file="$(find-pkg-share ssu2_launch)/launch/components/map.launch.xml">
    <arg name="use_pointcloud" value="$(var use_pointcloud)"/>

    <arg name="pointcloud_map_path" value="$(var pointcloud_map_path)"/>
    <arg name="pointcloud_map_metadata_path" value="$(var pointcloud_map_metadata_path)"/>
    <arg name="lanelet2_map_path" value="$(var lanelet2_map_path)"/>
    <arg name="map_projector_info_path" value="$(var map_projector_info_path)"/>

    <arg name="pointcloud_map_loader_param_path" value="$(find-pkg-share autoware_map_loader)/config/pointcloud_map_loader.param.yaml"/>
    <arg name="lanelet2_map_loader_param_path" value="$(find-pkg-share autoware_map_loader)/config/lanelet2_map_loader.param.yaml"/>
    <arg name="map_tf_generator_param_path" value="$(find-pkg-share autoware_map_tf_generator)/config/map_tf_generator.param.yaml"/>
    <arg name="map_projection_loader_param_path" value="$(find-pkg-share autoware_map_projection_loader)/config/map_projection_loader.param.yaml"/>
  </include>

  <node pkg="rviz2" exec="rviz2" name="rviz2" output="screen"
    args="-d $(var rviz_config) -s $(find-pkg-share ssu2_launch)/rviz/image/suu_emblem1.png"
    if="$(var rviz)"
    respawn="$(var rviz_respawn)"
  >
    <!-- <env name="QT_QPA_PLATFORMTHEME" value="qt5ct"/> -->
  </node>

  <!-- PRESERVED_JINJA2_CODEGEN_END -->
</launch>